#!/bin/bash

. ${HOME}/.config/bspwm/panel/profile

PANELS=( top bottom top-2 bottom-2 )
#PANELS=( top top-2 )

function start_panel () {
  ppolybar $1 &
}

function stop_panel () {
  pkill -x $1
}

case "$1" in
  -s|--start)
    for x in ${PANELS[@]}; do
      if [ "! pgrep -c -x $x" ]; then
        start_panel $x
      fi
    done
    ;;
  -k|-kill|--stop)
#    for x in ${PANELS[@]}; do
#      stop_panel $x
#    done
    killall polybar
    ;;
  -r|--reload|--refresh)
    killall polybar
    sleep 0.2s
    for x in ${PANELS[@]}; do
#      stop_panel $x
      start_panel $x
    done
    ;;
esac

exit 0
