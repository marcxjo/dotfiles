#!/bin/sh

# Polybar config file generator for themer.

cat <<-POLYBAR_CONFIG >${theme_dir}/polybar
	[colors]
	background = "${colorbg}"
	background-alt = "${color0}"
	foreground = "${colorfg}"
	foreground-alt = "${color15}"
	primary = "${color3}"
	secondary = "${color2}"
	alert = "${color1}"

	[bar/top]
	monitor = \${env:MONITOR:DVI-1}
	width = 1440
	height = 16
	offset-x = 240
	offset-y = 8
	radius = 0
	fixed-center = true

	background = "#E6${colorbg:1}"
	foreground = "#E6${colorfg:1}"

	border-size = 4
	border-color = "#E6${colorbg:1}"

	padding-left = 2
	padding-right = 2

	module-margin-left = 2
	module-margin-right = 2

	font-0 = terminus:pixelsize=12;2
	font-1 = unifont:fontformat=truetype:size=8:antialias=false;2
	font-2 = siji:pixelsize=10;2

	; See https://github.com/anchnk/dotfiles
	; for the weather module below.
	modules-left = memory cpu xkeyboard volume
	modules-center = bspwm
	modules-right = player wlan weather date

	tray-position = right
	tray-padding = 2

	wm-restack = bspwm

	override-redirect = false

	scroll-up = bspwm-desknext
	scroll-down = bspwm-deskprev

	cursor-click = pointer
	cursor-scroll = ns-resize

	[bar/top-2]
	inherit = bar/top

	monitor = \${env:MONITOR:DVI-0}
	width = 1120

	[bar/bottom]
	inherit = bar/top

	bottom = true

	modules-left = xwindow
	modules-center =
	modules-right =

	[bar/bottom-2]
	inherit = bar/bottom

	monitor = \${bar/top-2.monitor}
	width = \${bar/top-2.width}

	[module/xwindow]
	type = internal/xwindow

	format = <label>
	format-prefix = "  "
	format-prefix-foreground = \${colors.foreground-alt}

	label = "%title%"
	label-maxlen = 256

	[module/xkeyboard]
	type = internal/xkeyboard

	blacklist-0 = num lock
	blacklist-1 = caps lock

	format-prefix = " "
	format-prefix-foreground = \${colors.foreground-alt}

	label-layout = %layout%

	label-indicator-padding = 2
	label-indicator-margin = 1
	label-indicator-background = \${colors.secondary}

	[module/bspwm]
	type = internal/bspwm

	ws-icon-0 = wksp_1_1;*
	ws-icon-1 = wksp_1_2;*
	ws-icon-2 = wksp_1_3;*
	ws-icon-3 = wksp_2_1;*
	ws-icon-4 = wksp_2_2;*
	ws-icon-5 = wksp_2_3;*
	ws-icon-default = *

	label-focused = %icon%
	label-focused-foreground = \${colors.foreground-alt}
	label-focused-padding = 2

	label-occupied = %icon%
	label-occupied-foreground = \${colors.primary}
	label-occupied-padding = 2

	label-urgent = %icon%
	label-urgent-foreground = \${colors.secondary}
	label-urgent-padding = 2

	label-empty = %icon%
	label-empty-foreground = \${colors.foreground}
	label-empty-padding = 2

	[module/cpu]
	type = internal/cpu

	interval = 2
	format-prefix = " "
	format-prefix-foreground = \${colors.foreground-alt}
	label = %percentage:2%%

	[module/memory]
	type = internal/memory

	interval = 2
	format-prefix = " "
	format-prefix-foreground = \${colors.foreground-alt}
	label = %percentage_used%%

	[module/player]
	type=custom/script

	format = <label>
	format-prefix = " "
	format-prefix-foreground = \${colors.foreground-alt}

	exec = ~/.config/polybar/scripts/player-mpris-tail.py
	tail = true

	click-left = ~/.config/polybar/scripts/player-ctrl.sh previous
	click-right = ~/.config/polybar/scripts/player-ctrl.sh next
	click-middle = ~/.config/polybar/scripts/player-ctrl.sh play-pause

	[module/wlan]
	type = internal/network

	interface = tun-easytether
	interval = 3.0

	format-connected = <ramp-signal> <label-connected>
	label-connected = %ifname%

	format-disconnected = <label-disconnected>
	label-disconnected = %ifname% down
	label-disconnected-foreground = \${colors.foreground}

	ramp-signal-0 = 
	ramp-signal-1 = 
	ramp-signal-2 = 
	ramp-signal-3 = 
	ramp-signal-4 = 
	ramp-signal-foreground = \${colors.foreground-alt}

	[module/date]
	type = internal/date

	interval = 5

	date =
	date-alt = "%a, %b %d "

	time = "%I:%M %p"
	time-alt = "%I:%M %p"

	format-prefix = " "
	format-prefix-foreground = \${colors.foreground-alt}

	label = %date% %time%

	[module/weather]
	type = custom/script

	interval = 3600

	format = <label>
	format-prefix = " "
	format-prefix-foreground = \${colors.foreground-alt}

	exec = ~/.config/polybar/scripts/weather

	[module/volume]
	type = internal/volume

	format-volume = <label-volume>
	format-volume-prefix = " "
	format-volume-prefix-foreground = \${colors.foreground-alt}

	label-volume = "%percentage%%"

	format-muted-prefix = " "
	format-muted-foreground = \${colors.foreground-alt}

	label-muted = sound muted

	bar-volume-width = 10
	bar-volume-foreground-0 = \${colors.primary}
	bar-volume-foreground-1 = \${colors.primary}
	bar-volume-foreground-2 = \${colors.primary}
	bar-volume-foreground-3 = \${colors.primary}
	bar-volume-foreground-4 = \${colors.primary}
	bar-volume-foreground-5 = \${colors.secondary}
	bar-volume-foreground-6 = \${colors.alert}
	bar-volume-gradient = false
	bar-volume-indicator = ¤
	bar-volume-indicator-font = 2
	bar-volume-indicator-foreground = \${colors.foreground-alt}
	bar-volume-fill = ─
	bar-volume-fill-font = 2
	bar-volume-empty = ─
	bar-volume-empty-font = 2
	bar-volume-empty-foreground = \${root.foreground}

	[settings]
	screenchange-reload = true

	[global/wm]
	margin-top = 0
	margin-bottom = 0

	; vim:ft=dosini
POLYBAR_CONFIG
